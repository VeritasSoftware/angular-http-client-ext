{"version":3,"file":"angular-extended-http-client.umd.js.map","sources":["ng://angular-extended-http-client/lib/angular-extended-http-client.service.ts","ng://angular-extended-http-client/lib/angular-extended-http-client.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpResponse, HttpHeaders } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface IObservableBase {\r\n    \r\n}\r\n\r\nexport interface IObservableErrorBase {\r\n    \r\n}\r\n\r\nexport interface IObservable<T> extends IObservableBase {\r\n    (subscribe: T) : void;    \r\n}\r\n\r\nexport interface IObservableHttpResponse<T> extends IObservableBase {\r\n  (subscribe: ISubscribe<T>) : void;    \r\n}\r\n\r\nexport interface IObservableError extends IObservableErrorBase {\r\n    (error: ISubscribeError) : void;\r\n}\r\n\r\nexport interface IObservableCustomError<TError> extends IObservableErrorBase {\r\n    (error: TError) : void;\r\n}\r\n\r\nexport interface IObservableHttpCustomError<TError> extends IObservableErrorBase {\r\n  (error: ISubscribeCustomError<TError>) : void;\r\n}\r\n\r\nexport interface ISubscribeBase {\r\n    ok: boolean;\r\n    headers: HttpHeaders;\r\n    status: number;\r\n    statusText: string;    \r\n}\r\n\r\nexport interface ISubscribe<T> extends ISubscribeBase {\r\n    ok: boolean;\r\n    body: T;\r\n    headers: HttpHeaders;\r\n}\r\n\r\nexport class Subscribe<T> implements ISubscribe<T> {\r\n    ok: boolean;\r\n    body: T;\r\n    headers: HttpHeaders;\r\n    status: number;\r\n    statusText: string;\r\n}\r\n\r\nexport interface ISubscribeError extends ISubscribeBase {\r\n    message: string;\r\n    status: number;\r\n    statusText: string;\r\n}\r\n\r\nexport interface ISubscribeCustomError<TError> extends ISubscribeBase {\r\n  error: TError;\r\n  message: string;\r\n  status: number;\r\n  statusText: string;\r\n}\r\n\r\nexport class SubscribeError implements ISubscribeError {\r\n    ok: boolean;\r\n    headers: HttpHeaders;\r\n    message: string;\r\n    status: number;\r\n    statusText: string;\r\n}\r\n\r\nexport class SubscribeCustomError<TError> implements ISubscribeCustomError<TError> {\r\n  ok: boolean;\r\n  error: TError;\r\n  headers: HttpHeaders;\r\n  message: string;\r\n  status: number;\r\n  statusText: string;\r\n}\r\n\r\nexport enum ErrorType {\r\n  IObservableError,\r\n  IObservableCustomError,\r\n  IObservableHttpCustomError\r\n}\r\n\r\nexport interface IHttpClientExtended {\r\n    get<T>(url: string, success?: IObservable<T>, failureType?: ErrorType, failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<T>>;\r\n\r\n    getUsingHttpResponse<T>(url: string, \r\n                              success?: IObservableHttpResponse<T>, \r\n                              failureType?: ErrorType, \r\n                              failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<T>>;\r\n\r\n    post<TRequest, TResponse>(url: string, model: TRequest, \r\n                                success?: IObservable<TResponse>, \r\n                                failureType?: ErrorType,\r\n                                failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<TResponse>>;\r\n\r\n    postUsingHttpResponse<TRequest, TResponse>(url: string, model: TRequest, \r\n                                                        success?: IObservableHttpResponse<TResponse>, \r\n                                                        failureType?: ErrorType,\r\n                                                        failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<TResponse>>;                              \r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class HttpClientExt implements IHttpClientExtended {\r\n\r\n  constructor(private client: HttpClient)\r\n  {\r\n  }\r\n  \r\n  get<T>(url: string, success?: IObservable<T>, failureType?: ErrorType, failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<T>> {                \r\n    let httpResponse = this.client.get<T>(url, options != null ? { headers: options.headers, observe: 'response' } : {observe: 'response'});\r\n\r\n    if (success != null) {\r\n        httpResponse\r\n            .subscribe(x => this.processSuccessResponse(x,success), error => this.processErrorResponse(error, failure, failureType));\r\n    }        \r\n\r\n    return httpResponse;                   \r\n  }\r\n\r\n  getUsingHttpResponse<T>(url: string, \r\n                            success?: IObservableHttpResponse<T>, \r\n                            failureType?: ErrorType,\r\n                            failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<T>> {                \r\n    let httpResponse = this.client.get<T>(url, options != null ? { headers: options.headers, observe: 'response' } : {observe: 'response'});\r\n\r\n    if (success != null) {\r\n        httpResponse\r\n            .subscribe(x => this.processSuccessHttpResponse(x,success), error => this.processErrorResponse(error, failure, failureType));\r\n    }        \r\n\r\n    return httpResponse;                   \r\n  }\r\n\r\n  post<TRequest, TResponse>(url: string, model: TRequest, \r\n                              success?: IObservable<TResponse>,\r\n                              failureType?: ErrorType, \r\n                              failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<TResponse>> {                \r\n    let httpResponse = this.client.post<TResponse>(url, model, options != null ? \r\n                                                                { headers: options.headers, observe: 'response' } \r\n                                                                : {observe: 'response'});\r\n    if (success != null) {\r\n        httpResponse\r\n            .subscribe(x => this.processSuccessResponse(x,success), error => this.processErrorResponse(error, failure, failureType));\r\n    }        \r\n\r\n    return httpResponse;                   \r\n  }\r\n\r\n  postUsingHttpResponse<TRequest, TResponse>(url: string, model: TRequest, \r\n                                                      success?: IObservableHttpResponse<TResponse>,\r\n                                                      failureType?: ErrorType, \r\n                                                      failure?: IObservableErrorBase, options?: any) : Observable<HttpResponse<TResponse>> {                \r\n    let httpResponse = this.client.post<TResponse>(url, model, options != null ? \r\n                                                                { headers: options.headers, observe: 'response' } \r\n                                                                : {observe: 'response'});\r\n    if (success != null) {\r\n        httpResponse\r\n            .subscribe(x => this.processSuccessHttpResponse(x,success), error => this.processErrorResponse(error, failure, failureType));\r\n    }        \r\n\r\n    return httpResponse;                   \r\n  }\r\n\r\n  private processSuccessResponse<TResponse>(response: HttpResponse<TResponse>, success: IObservable<TResponse>) : void {\r\n\r\n    if (success != null) {\r\n      if (response.ok) {\r\n        success(response!.body);\r\n      }                        \r\n    }      \r\n  }\r\n\r\n  private processSuccessHttpResponse<TResponse>(response: HttpResponse<TResponse>, success: IObservableHttpResponse<TResponse>) : void {\r\n\r\n    if (success != null) {\r\n      if (response.ok) {\r\n        let subscribe: Subscribe<TResponse> = new Subscribe<TResponse>();\r\n        subscribe.ok = response.ok;\r\n        subscribe.status = response.status;\r\n        subscribe.statusText = response.statusText;\r\n        subscribe.body = response.body;                        \r\n        subscribe.headers = response.headers;\r\n                \r\n        success(subscribe);                            \r\n      }                        \r\n    }      \r\n  }\r\n\r\n  private processErrorResponse<TError>(error: any, failure: IObservableErrorBase, errorType: ErrorType) : void {\r\n\r\n    switch(errorType)\r\n    {\r\n      case ErrorType.IObservableError:\r\n        let observableError = <IObservableError> failure;\r\n        let subscribe1: SubscribeError = new SubscribeError();\r\n        subscribe1.ok = false;\r\n        subscribe1.headers = error.headers;\r\n        subscribe1.message = error.message;\r\n        subscribe1.status = error.status;\r\n        subscribe1.statusText = error.statusText;\r\n\r\n        observableError(subscribe1);\r\n        break;\r\n      case ErrorType.IObservableCustomError:\r\n        let observableCustomError = <IObservableCustomError<TError>> failure;\r\n        observableCustomError(error!.error);\r\n        break;\r\n      case ErrorType.IObservableHttpCustomError:\r\n        let observableHttpCustomError = <IObservableHttpCustomError<TError>> failure;\r\n        let subscribe: SubscribeCustomError<TError> = new SubscribeCustomError();\r\n        subscribe.ok = false;\r\n        if (error.error) {\r\n          subscribe.error = error.error;\r\n        }        \r\n        subscribe.headers = error.headers;\r\n        subscribe.message = error.message;\r\n        subscribe.status = error.status;\r\n        subscribe.statusText = error.statusText;\r\n\r\n        observableHttpCustomError(subscribe);\r\n        break;\r\n      default:        \r\n        break;\r\n    }\r\n  }  \r\n}","import { NgModule } from '@angular/core';\n//import { AngularExtendedHttpClientComponent } from './angular-extended-http-client.component';\n\nimport { HttpClientExt } from '../lib/angular-extended-http-client.service';\nimport { HttpClientModule } from '@angular/common/http';\n\n@NgModule({\n  imports: [ HttpClientModule ],\n  providers: [ HttpClientExt ]  \n})\nexport class HttpClientExtModule { }\n"],"names":["Injectable","HttpClient","NgModule","HttpClientModule"],"mappings":"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"}
